define(function(){"use strict";Array.prototype.indexOf=Array.prototype.indexOf||function(e){for(var t in this)if(this[t]===e)return t;return-1},Function.prototype.bind=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o};var e={getType:function(e){return Object.prototype.toString.call(e)},Eventer:{windowLoad:function(e){return"function"==typeof e&&("complete"===document.readyState?e():void window.addEventListener("load",e))}},Creater:{createInstance:function(e,t){return t=Array.prototype.slice.call(t),t.splice(0,0,void 0),new(e.bind.apply(e,t))}},Ajax:{Request:function(){function t(e,t,u){e=e.toUpperCase(),n=new XMLHttpRequest,n.open(e,t,!0),i=u,"POST"===e&&this.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.onload=function(){if(n.status>=200&&n.status<400){var t=null;t="JSON"===e?JSON.parse(n.responseText):n.responseText,"function"==typeof r&&r(t)}else"function"==typeof o&&o(n.status)}}var n=null,r=null,o=null,i="";return t.prototype={setRequestHeader:function(e,t){return n.setRequestHeader(e,t),this},setCallback:function(e){return"function"==typeof e&&(r=e),this},setErrorback:function(e){return"function"==typeof e&&(n.onerror=e),this},setData:function(e){return i=e,this},send:function(){n.send(i)}},e.Creater.createInstance(t,arguments)}},Loader:function(){return new function(){function t(e){for(var t in e)n(t,e[t])}function n(t,o){var i=e.getType(o);if("[object Array]"===i)for(var f=0;f<o.length;f++)n(t,o[f]);else if("[object Object]"===i&&o.hasOwnProperty("extensions")){var a={callback:void 0,errback:void 0};for(var c in a)o[c]="function"==typeof o[c]?o[c]:a[c];o.styles=r(o.styles),u(t,o)}else console.error("Invalid Configuration given for "+t+"!",o)}function r(t){var n=[];switch(e.getType(t)){case"[object String]":n=[{href:type}];break;case"[object Array]":for(var r=[],u=0;u<t.length;u++){var f=o(t[u]);f=i(f),void 0!==f&&r.push(f)}n=r}return n}function o(e){if("string"==typeof e||void 0!==e.href){if("string"==typeof e)return o({href:e});if("string"!=typeof e.href);else{var t=e.href.indexOf(".css");if(t===e.href.length-4)return e;if(t==-1)return e.href+=".css",e}}}function i(e){if("object"==typeof e&&void 0!==e.href){var t={rel:"stylesheet",media:"all",type:"text/css"};for(var n in t)e[n]=e[n]?e[n]:t[n];return e}}function u(e,t){v.hasOwnProperty(e)||(v[e]=[]),v[e].push(t)}function f(e){void 0===e&&(e=requireBase);for(var t in v)a(e,t,v[t])}function a(e,t,n){for(var r=!1,o=0;o<n.length&&(r=s(e,t,n[o],r));o++);}function c(){if(b){b=!1;for(var e=0;e<document.styleSheets.length;e++){var t=void 0===document.styleSheets[e].ownerNode,n=document.styleSheets[e].ownerNode||document.styleSheets[e].owningElement;if(t){for(var r=0;e<n.length;r++)if("href"===n[r].name){n=n[r];break}g.push(n.value)}else n.getAttribute("href")}}}function s(e,t,n,r){return!(!r&&!p(t)||(e(n.extensions,n.callback,n.errback),l(n.styles),0))}function l(e){e.length>0&&void 0===w&&(w=document.querySelector("head"));for(var t=0;t<e.length;t++){var n=e[t];if(g.indexOf(n.href)===-1){var r=document.createElement("link");for(var o in n){var i=n[o];r.setAttribute(o,i)}w.appendChild(r),g.push(n.href)}}}function p(e){return d(e)}function d(e){for(var t,n=e.split("||"),r=0;r<n.length&&!(t=y(n[r]));r++);return t}function y(e){for(var t,n=e.split("&&"),r=0;r<n.length&&(t=h(n[r]));r++);return t}function h(e){var t=e.indexOf("!")>-1;t&&(e=e.split("!").pop());var n=!document.querySelector(e);return t&&n?n:!n}var v={},g=[],w=void 0,b=!0,x=function(){};return x.prototype={getConfig:function(){return v},addConfig:function(e){return t(e),this},load:function(t){e.Eventer.windowLoad(function(){c(),f(t)})}},new x}}};return{getLoader:function(){return e.Loader()},getEventer:function(){return e.Eventer},getCreater:function(){return e.Creater},Ajax:{json:function(t,n){return new e.Ajax.Request("JSON",t,n)},post:function(t,n){return new e.Ajax.Request("POST",t,n)},get:function(t,n){return new e.Ajax.Request("GET",t,n)}}}});